<!DOCTYPE html>
<html>

<head>
    <title>W3.CSS Template</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css" />
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />






    <style>
        body,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: "Lato", sans-serif;
        }
        
        body,
        html {
            height: 100%;
            color: #777;
            line-height: 1.8;
        }
        /* Create a Parallax Effectlogo */
        
        .bgimg-1,
        .bgimg-2,
        .bgimg-3 {
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        /* First image (Logo. Full height) */
        
        .bgimg-1 {
            background-image: url('meetings.jpg');
            min-height: 100%;
        }
        /* Second image (Portfolio) */
        
        .bgimg-2 {
            background-image: url('meetups.png');
            min-height: 400px;
        }
        /* Third image (Contact) */
        
        .bgimg-3 {
            background-image: url("NUS_logo.png");
            min-height: 400px;
        }
        
        .w3-wide {
            letter-spacing: 10px;
        }
        
        .w3-hover-opacity {
            cursor: pointer;
        }
        /* Turn off parallax scrolling for tablets and phones */
        
        @media only screen and (max-device-width: 1600px) {
            .bgimg-2,
            .bgimg-3 {
                background-attachment: scroll;
                min-height: 400px;
            }
        }
    </style>
    <script type='text/javascript' src='config.js'></script>
    <script type="text/javascript">
        var num_links = 1;

        function GetDynamicSuggestionCart(value) {
            return '<input name = "DynamicSuggestionCart" type="text" size =111   placeholder="Enter next timetable link! " value =  "' + value + '" />' + '<input type="button" value="Remove" onclick = "RemoveSuggestionCart(this)" />'
        }


        function AddSuggestionCart() {
            if (num_links < 5) {
                var div = document.createElement('DIV');
                div.innerHTML = GetDynamicSuggestionCart("");
                document.getElementById("tt_space").appendChild(div);
                num_links += 1;
            } else {
                alert('Max 5 timetable links')
            }

        }

        function RemoveSuggestionCart(div) {
            document.getElementById("tt_space").removeChild(div.parentNode);
            num_links -= 1;
        }

        function RecreateDynamicTextboxes() {
            var comments_data = eval('<%=Values%>');
            if (comments_data != null) {
                var html = "";
                for (var i = 0; i < comments_data.length; i++) {
                    html += "<div>" + GetDynamicSuggestionCart(comments_data[i]) + "</div>";
                }
                document.getElementById("tt_space").innerHTML = html;
            }
        }
        window.onload = RecreateDynamicTextboxes;
    </script>






    <script>
        // Modal Image Gallery
        function onClick(element) {
            document.getElementById("img01").src = element.src;
            document.getElementById("modal01").style.display = "block";
            var captionText = document.getElementById("caption");
            captionText.innerHTML = element.alt;
        }

        // Change style of navbar on scroll
        window.onscroll = function() {
            myFunction()
        };

        function myFunction() {
            var navbar = document.getElementById("myNavbar");
            if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                navbar.className = "w3-bar" + " w3-card" + " w3-animate-top" + " w3-white";
            } else {
                navbar.className = navbar.className.replace(" w3-card w3-animate-top w3-white", "");
            }
        }

        // Used to toggle the menu on small screens when clicking on the menu button
        function toggleFunction() {
            var x = document.getElementById("navDemo");
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
            } else {
                x.className = x.className.replace(" w3-show", "");
            }
        }
    </script>

    <script src="timetable.js"></script>

</head>



<body>

    <!-- Navbar (sit on top) -->
    <div class="w3-top w3-white">
        <div class="w3-bar " id="myNavbar">
            <a class="w3-bar-item w3-button w3-hover-black w3-hide-medium w3-hide-large w3-right" href="javascript:void(0);" onclick="toggleFunction()" title="Toggle Navigation Menu">
                <i class="fa fa-bars"></i>
            </a>
            <a href="#home" class="w3-bar-item w3-button">HOME</a>
            <a href="#about" class="w3-bar-item w3-button w3-hide-small"><i class="fa fa-user"></i> ABOUT</a>
            <!-- <a href="#portfolio" class="w3-bar-item w3-button w3-hide-small"><i class="fa fa-th"></i> PORTFOLIO</a> -->
            <a href="#contact" class="w3-bar-item w3-button w3-hide-small"><i class="fa fa-envelope"></i> CONTACT</a>
            <a href="#find_space" class="w3-bar-item w3-button w3-hide-small"><i class="fa fa-pencil"></i> FIND A TIME AND
        SPACE</a>
            <!-- <a href="#" class="w3-bar-item w3-button w3-hide-small w3-right w3-hover-red">
      <i class="fa fa-search"></i>
    </a> -->
        </div>

        <!-- Navbar on small screens -->
        <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium">
            <a href="#about" class="w3-bar-item w3-button" onclick="toggleFunction()">ABOUT</a>
            <!-- <a href="#portfolio" class="w3-bar-item w3-button" onclick="toggleFunction()">PORTFOLIO</a> -->
            <a href="#contact" class="w3-bar-item w3-button" onclick="toggleFunction()">CONTACT</a>
            <a href="#find_space" class="w3-bar-item w3-button" onclick="toggleFunction()">FIND A TIME AND SPACE</a>
            <!-- <a href="#" class="w3-bar-item w3-button">SEARCH</a> -->
        </div>
    </div>

    <!-- First Parallax Image with Logo Text -->
    <div class="bgimg-1 w3-display-container w3-opacity-min" id="home">
        <div class="w3-display-middle" style="white-space:nowrap;">
            <!-- This contains the My Logo statement -->
            <span class="w3-center w3-padding-large w3-black w3-xlarge w3-wide w3-animate-opacity">
        MeetUps</span>
            <!-- MY <span class="w3-hide-small">WEBSITE</span> LOGO</span> -->
        </div>
    </div>

    <!-- Container (Booking Section) -->
    <div class="w3-content w3-container w3-padding-64" id="find_space">
        <h3 class="w3-center"> Find your time and space!</h3>
        <form action="/action_page.php" target="_blank">
            <div class="w3-row-padding" style="margin:0 -16px 8px -16px">
            </div>



            <!-- https://stackoverflow.com/questions/50746868/how-to-add-input-fields-on-button-click -->

            <div>
                <input name="DynamicSuggestionCart" type="text" size=121 placeholder="Enter NUSMods Timetable Link!" />
            </div>


            <div id=tt_space></div>

            <input class="w3-button w3-black w3-section " type="button" id="btnAdd" onclick="AddSuggestionCart();" value="ADD TIMETABLES" />

            <button class="w3-button w3-black w3-right w3-section" type="button" onclick="checkAvaAPI();">
        <i class="fa fa-pencil"></i> CHECK AVAILABILITIES
      </button>
        </form>

    </div>

    <hr>
    <!-- Container (About Section) -->
    <div class="w3-content w3-container w3-padding-64" id="about">
        <h1 class="w3-center"> ABOUT MEETUPS</h1>
        <!-- <p class="w3-center"><em>2 Computer Engineers trying to make change to our NUS community</em></p> -->
        <!-- <p style="font-size:15px;">
      Meetups is an NUS Orbital project looking to make NUS facilities booking easy through the integration of NUSMods!
  </p> -->
        <div class="w3-row ">
            <div class=" w3-center m6  w3-padding-large">
                <!-- <p><b><i class="fa fa-user w3-margin-right"></i>Wilson Ng + Chin Han</b></p> -->
                <img src="wilson_ng.png" class="w3-round w3-image w3-opacity w3-hover-opacity-off" alt="Photo of Me" width="100" height="100">
            </div>


            <!-- Hide this text on small devices -->
            <div class=" m6 w3-hide-small w3-padding-large w3-center">
                <p>
                    <!-- Welcome to Meetups!<br>  -->
                    Meetups is an NUS Orbital project founded by Wilson and Chin Han.<br>Meetups aim to make searching for unused NUS facilities easier through the integration of NUSMODS features! <br> We are both NUS Computer Engineering Major and we
                    loveeee to code! <br>
                    <strong>Fun fact:</strong> We were both from Singapore Polytechnic!!!
                </p>
            </div>
        </div>




        <!-- Modal for full size images on click-->
        <div id="modal01" class="w3-modal w3-black" onclick="this.style.display='none'">
            <span class="w3-button w3-large w3-black w3-display-topright" title="Close Modal Image"><i
          class="fa fa-remove"></i></span>
            <div class="w3-modal-content w3-animate-zoom w3-center w3-transparent w3-padding-64">
                <img id="img01" class="w3-image">
                <p id="caption" class="w3-opacity w3-large"></p>
            </div>
        </div>



        <div class="w3-row w3-center  w3-padding-16"></div>


        <hr>

        <!-- Container (Contact Section) -->
        <div class="w3-content w3-container w3-padding-64 " id="contact">
            <h1 class="w3-center title"><strong>CONTACT US!</strong></h1>
            <!-- <p class="w3-center"><em><strong>We'd love your feedback!</strong></em></p> -->

            <div class="w3-row w3-padding-32 w3-section">
                <div class="w3-col m4 w3-container">
                    <img src="meetups.png" class="w3-image w3-round" style="width:100%">
                </div>
                <div class="w3-col m8 w3-panel w3-center ">

                    <div class="w3-large w3-margin-bottom">
                        <i class="fa fa-map-marker fa-fw w3-hover-text-black w3-xlarge w3-margin-right"></i> National University of Singapore <br>
                        <i class="fa fa-phone fa-fw w3-hover-text-black w3-xlarge w3-margin-right"></i> Phone (Chin Han): 8723 0501
                        <br>
                        <i class="fa fa-envelope fa-fw w3-hover-text-black w3-xlarge w3-margin-right"></i> Email: e0726814@u.nus.edu
                        <br>
                    </div>
                    <p>Swing by for a cup of <i class="fa fa-coffee"></i>, or leave us a note:</p>


                    <section class="section container">
                        <form name="contact" id="contact-form">
                            <h3 class="title " id="contact"><strong>Contact</strong></h3>
                            <div class="field">
                                <label class="label" for="name">Name</label>
                                <div class="control">
                                    <input required class="input" type="text" placeholder="Name" name="name" />
                                </div>
                            </div>

                            <div class="field">
                                <label class="label" for="email">Email</label>
                                <div class="control has-icons-left">
                                    <input class="input" type="email" required placeholder="Email" name="email" />
                                    <span class="icon is-small is-left">
                    <i class="fas fa-envelope"></i>
                  </span>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label" for="message">Message</label>
                                <div class="control">
                                    <textarea required class="textarea" placeholder="Feedback" name="message"></textarea>
                                </div>
                            </div>

                            <div class="field is-grouped">
                                <div class="control">
                                    <button class="button is-primary" type="submit_feedback">Submit</button>
                                </div>
                            </div>
                        </form>
                    </section>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>


        <!-- For each element in the formInputs,  -->
        <script>
            const {
                createClient
            } = supabase
            supabase = createClient(config.SUPABASE_URL, config.SUPABASE_KEY)
                // supabase = createClient('https://fkrbgcocabobsjdzxlib.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrcmJnY29jYWJvYnNqZHp4bGliIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTI5NDAzNTcsImV4cCI6MTk2ODUxNjM1N30.nutJqNIk17aTtxOTe9kegzJJM3kd7T0DkNMf5WV65Tg');

            const form = document.querySelector('#contact-form')
            form.addEventListener('submit', async(event) => {
                event.preventDefault()

                const formInputs = form.querySelectorAll('input,  textarea')

                let submision = {}

                formInputs.forEach(element => {
                    const {
                        value,
                        name
                    } = element
                    if (value) {
                        submision[name] = value
                    }
                })

                const {
                    error
                } = await supabase.from('meetups_user_feedback').insert([submision], {
                    returning: 'minimal'
                })

                if (error) {
                    alert('There was an error please try again')
                } else {
                    alert('Thanks for contacting us')
                }

                formInputs.forEach(element => element.value = '')

            })
        </script>



</body>

</html>